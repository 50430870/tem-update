/*
粉丝福利红包
远程更新，看频道通知
cron:1 1 1 1 *
============Quantumultx===============
[task_local]
#粉丝福利红包
1 1 1 1 * jd_fans_fansactiveall.js, tag=粉丝福利红包, enabled=true
 */

const $ = new Env('粉丝福利红包');
var version_='jsjiami.com.v7';const ill1I1=iii1II;(function(liI1ll,ll1II,IllIii,liI1li,IllIil,ill1Ii,llIIl1){return liI1ll=liI1ll>>0x9,ill1Ii='hs',llIIl1='hs',function(ill1Il,i1lll1,Ii1I1I,l1i1Ii,l1iI1){const l1i1Il=iii1II;l1i1Ii='tfi',ill1Ii=l1i1Ii+ill1Ii,l1iI1='up',llIIl1+=l1iI1,ill1Ii=Ii1I1I(ill1Ii),llIIl1=Ii1I1I(llIIl1),Ii1I1I=0x0;const lliiI1=ill1Il();while(!![]&&--liI1li+i1lll1){try{l1i1Ii=parseInt(l1i1Il(0x132,'BEpO'))/0x1+-parseInt(l1i1Il(0x155,'H@0y'))/0x2*(-parseInt(l1i1Il(0x1c0,'hxxv'))/0x3)+-parseInt(l1i1Il(0xc9,'Y%5h'))/0x4*(-parseInt(l1i1Il(0xbd,'MvZ9'))/0x5)+-parseInt(l1i1Il(0x173,'KqNw'))/0x6*(parseInt(l1i1Il(0x18f,'X9Vj'))/0x7)+-parseInt(l1i1Il(0x149,'^V*['))/0x8+-parseInt(l1i1Il(0x140,'shTG'))/0x9+parseInt(l1i1Il(0x184,'MDBm'))/0xa;}catch(IiiI1){l1i1Ii=Ii1I1I;}finally{l1iI1=lliiI1[ill1Ii]();if(liI1ll<=liI1li)Ii1I1I?IllIil?l1i1Ii=l1iI1:IllIil=l1iI1:Ii1I1I=l1iI1;else{if(Ii1I1I==IllIil['replace'](/[xKfLIVlXTywDMNGYgkEnA=]/g,'')){if(l1i1Ii===i1lll1){lliiI1['un'+ill1Ii](l1iI1);break;}lliiI1[llIIl1](l1iI1);}}}}}(IllIii,ll1II,function(lilII,IIIiI,iii1i1,IllIll,i1lllI,llIIi1,iI1IlI){return IIIiI='\x73\x70\x6c\x69\x74',lilII=arguments[0x0],lilII=lilII[IIIiI](''),iii1i1='\x72\x65\x76\x65\x72\x73\x65',lilII=lilII[iii1i1]('\x76'),IllIll='\x6a\x6f\x69\x6e',(0x132afd,lilII[IllIll](''));});}(0x18000,0xe9fdf,Iii11l,0xc2),Iii11l)&&(version_=Iii11l);const i1il1=$['isNode']()?require(ill1I1(0xd0,'PX)r')):'',I1l111=$[ill1I1(0x13b,'0Pgi')]()?require(ill1I1(0x138,'hxxv')):'';CryptoJS=$[ill1I1(0x1ce,'*lDA')]()?require(ill1I1(0x1ae,'0Pgi')):CryptoJS;const IIii1l=require(ill1I1(0xf3,'!)XL'));let I1iIII=[],liiI11='';function iii1II(_0x95690b,_0xc9f91d){const _0x51006f=Iii11l();return iii1II=function(_0x444f5b,_0x3c0e94){_0x444f5b=_0x444f5b-0xb9;let _0x3786f6=_0x51006f[_0x444f5b];if(iii1II['IUXDIW']===undefined){var _0x5a3498=function(_0x38365b){const _0x339bda='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x39da12='',_0x11627b='';for(let _0x3c4f65=0x0,_0x465cdb,_0x1d483c,_0x4911ec=0x0;_0x1d483c=_0x38365b['charAt'](_0x4911ec++);~_0x1d483c&&(_0x465cdb=_0x3c4f65%0x4?_0x465cdb*0x40+_0x1d483c:_0x1d483c,_0x3c4f65++%0x4)?_0x39da12+=String['fromCharCode'](0xff&_0x465cdb>>(-0x2*_0x3c4f65&0x6)):0x0){_0x1d483c=_0x339bda['indexOf'](_0x1d483c);}for(let _0x19a2ad=0x0,_0x23ae8d=_0x39da12['length'];_0x19a2ad<_0x23ae8d;_0x19a2ad++){_0x11627b+='%'+('00'+_0x39da12['charCodeAt'](_0x19a2ad)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x11627b);};const _0x4585fe=function(_0x4f91fe,_0x4c9b22){let _0x42efd8=[],_0x3444ae=0x0,_0xe57cfd,_0x451c0b='';_0x4f91fe=_0x5a3498(_0x4f91fe);let _0x5a3f00;for(_0x5a3f00=0x0;_0x5a3f00<0x100;_0x5a3f00++){_0x42efd8[_0x5a3f00]=_0x5a3f00;}for(_0x5a3f00=0x0;_0x5a3f00<0x100;_0x5a3f00++){_0x3444ae=(_0x3444ae+_0x42efd8[_0x5a3f00]+_0x4c9b22['charCodeAt'](_0x5a3f00%_0x4c9b22['length']))%0x100,_0xe57cfd=_0x42efd8[_0x5a3f00],_0x42efd8[_0x5a3f00]=_0x42efd8[_0x3444ae],_0x42efd8[_0x3444ae]=_0xe57cfd;}_0x5a3f00=0x0,_0x3444ae=0x0;for(let _0x178f19=0x0;_0x178f19<_0x4f91fe['length'];_0x178f19++){_0x5a3f00=(_0x5a3f00+0x1)%0x100,_0x3444ae=(_0x3444ae+_0x42efd8[_0x5a3f00])%0x100,_0xe57cfd=_0x42efd8[_0x5a3f00],_0x42efd8[_0x5a3f00]=_0x42efd8[_0x3444ae],_0x42efd8[_0x3444ae]=_0xe57cfd,_0x451c0b+=String['fromCharCode'](_0x4f91fe['charCodeAt'](_0x178f19)^_0x42efd8[(_0x42efd8[_0x5a3f00]+_0x42efd8[_0x3444ae])%0x100]);}return _0x451c0b;};iii1II['JThFOk']=_0x4585fe,_0x95690b=arguments,iii1II['IUXDIW']=!![];}const _0x3b43e4=_0x51006f[0x0],_0x29b73d=_0x444f5b+_0x3b43e4,_0x3154ce=_0x95690b[_0x29b73d];return!_0x3154ce?(iii1II['FZnphG']===undefined&&(iii1II['FZnphG']=!![]),_0x3786f6=iii1II['JThFOk'](_0x3786f6,_0x3c0e94),_0x95690b[_0x29b73d]=_0x3786f6):_0x3786f6=_0x3154ce,_0x3786f6;},iii1II(_0x95690b,_0xc9f91d);}if($[ill1I1(0x11d,'!)XL')]()){Object[ill1I1(0x11b,'p(Fu')](I1l111)[ill1I1(0x15f,'MDBm')](liiI1I=>{const l1i1II=ill1I1;I1iIII[l1i1II(0x13f,'TxM5')](I1l111[liiI1I]);});if(process[ill1I1(0xde,'MDBm')][ill1I1(0x107,'59*]')]&&process[ill1I1(0x189,'eR0q')]['JD_DEBUG']===ill1I1(0xbf,'^V*['))console['log']=()=>{};}else I1iIII=[$['getdata']('CookieJD'),$[ill1I1(0xbb,'hxxv')](ill1I1(0xc4,'^bgQ')),...II11ll($[ill1I1(0x146,'H@0y')]('CookiesJD')||'[]')[ill1I1(0x108,'ABNX')](ililII=>ililII[ill1I1(0x159,'0Pgi')])][ill1I1(0xfc,'ABNX')](lI1II1=>!!lI1II1);let ililI1=Date['now'](),IIii1i='';function Iii11l(){const l1lli1=(function(){return[version_,'xyDjMksKjniaLXmgi.xwcTogmYA.lIvTN7VGnEYf==','ACkjC8kt','aJO9WRqpWQO','a8kJxSocuSkNoSkCWONcJ3TI','kcJdK8kiEW','jtmBWP3cMmoq5BsB5As45PA2eqRcKG','d8kmWPH+wa','WQbChNBdIq','pX3dVCkpFa','WOKlW6dcVCkU','lxVcQSogzmoN','WR92lmkeuq','DCk8BSkFm8oDWPfND3hcKa','WP3cL8oKvshdQ8oG','5lQn5lID6lAH5y2n','WQVdNhO','5A69776z5y206icM6i+c5B20776y','nHZcRde','qCo+W6KKW4ddHmkHW7pcOf7dQWSt','aSkWW7CJW6S','jd3cNmkCW4OxW74','WPDxlCkOEmkC','zCkRW5G','Ee7dQayU','gSoiW4eWW74','wu7dVWG','sCkOabZcHmopW5ubDSkRp8ksW5y','sL/cVxj5','W4pcLKS9ALlcJeC','eSoYxe7dIq','wmkVW57cKCoOpvddQgtdUq','qahdPCkMsq','jthcHSkzW4CpW6y','WOS0kCkOW5q','WQiXW73cSSkO','eSkLWQVdRepdL8kYWRddHIpdSGdcPa','WOulW7/cOSkNW5nDW5i','W5n2FCk4WOryW63cHG','lXBcUbJcTa','WQ5KfmkdW7q','is/dICk3rG','hcxdU8k0','WP3dT3NdMb8','W4n8WR4tW5q','ahmtg3i','q3VcNxzd','C8ovamoOWP7cLCkQ','EMFdGSolWP4+W6lcPCkBWQa1','tw7dOmo/B8oW','W7NdKWtcGMK','WRVdNGRdQW','WP1ldmkSDCkC','W4hcJmoZWO8OrmoujmksgG','lUABV+AxI+A3NowlO8ocWPW','oLZcTX8Y','ze/cP8ksaCk2','b8oiW4CGW7m','cdOOWRqCWRTu','nvKomuNdPNivW5tcRW','yedcQg1o','6Acq5yYZzWVVVl4','WPVcLCkMWOmXwCkkmCox','umoXWOxcLCk/fG','lSo9sMddLq','dCo4E03dOW','iHCvWQdcOa','xmo0g8kxdq','WOXEaw7dQW','iSkfumk3W6JcSSkLlcVcMIG','W6ZdUrZcSLFdUY3dKXDv','brhcVmk/W6u','sZLYWRac','s8omkSoPWQ0','WPzqf8k3B8odWRjQW70NDv4KWOxcMX1WuHNcGI7dMIldPCkNW6xcU8ofyLBcSCkpW73cTSoyW7VdSCoSWOyDW5exW78','dq7cPcBcVZJcVcC','WPldKMuSW4O','sxJcOSoGhCoVobVdQg5tzSkw','W5hcKH8VW5/cOCkdW7lcRW','ue1Rlq','WPZdSdpdO8k9CxH6WOldVq','W5VdOctdR8kLFxPIWQFcPmkcf03dR1edW6mRA8kxdhtcT8ktrSkitCoZgJuCiXZdGmo4W7D7ECobj2xdOhn/W5T3WPlcTJJcL0NcQKVcNmkKjmkDWPxcTaVdPtSJf2hdJ8kejYSBW7JcO27dIwPOa1vciuJcM8k+sq','eLZcLreLec8','wvfI','WQldPquzW6j4vaBcQSou','WPtdVrBdId4','lt/cGCkXW5i','W4ZcPhpdN8kBv2DtWO8','W4vtAmkbWQ8','tCk8CmkIFq','W4BcJmo4WPHXtq','WOhdShJdNHi','WPtdMXusW5q','6i+75B+l5PEu5O6p6i6j5y2V5Asx6lwh','W5TyWO8uW7u','x2nIW4fkW6OiW7SSBMFcMs4u'].concat((function(){return['WP3dJti3W5O','umk+DmkDva','WOH1e8kGza','FCoBba','W7RdHXG','W6NdUmk/','lc4DWPNcGa','W5rNWQuqWP10wCowzcxcJ3XqfCk4W4/dSG','WR/dTtBdRSk8','o8o0WO8YW6xdKSoawXaJDmoxoa','WO8Pl8oLW70nW5NcOSoGW6tcImkB','W4JcR8oGWRbv','aSkvWPT3uSoSbduT','aYy9','hCkqW4fTdmoTsdKVW6hcR1JdOv/cStO1sIK2B3qEW77cSdfjW7hcMs/dRdu','aSogWOy','zePpaKe','WPhcL8oQwW','W5j+WRGjW4C9sCoksY0','ChZdIIy0','WRjMeSkI','it3dLa','xeVdMJe1','ymosya','W7VcLKK','cW/cSJhcVa','WRVdLGtdPqFdN8k6W5a','WQarW43cNmkF','iqRdImkQsW','WQTMfSkZ','WPdcVSoLDa0','FmoWoSkNjW','kCoaWO1hsq','quNcPmkndCkHnmou','ACo3C2Cg','mepdOSoVdq975BYF5As844k55lMp5lU16lEB5yYd','WOXdfSkrW6a','tfZcOSkpda','saJcPSkHseG','i+IVJoMfGEAxKoEyNEw8RoIpG+woVCkuoJrZWPT9','BMRdQaOJ','WP1wgSk3AmkwWRaVW6W','qSofhCkDh8o2j8k4WRtcPW','W57cOxqRyW','Emo1n8opWQ0','WPRdTJpdRSkQBg0','CSo6amkFdmo2emkxWOm','lZlcJatcUG','W77dNstcIu4','xJNdTSk0r8k7FbVdPYShk8kqWQpdOmkaw2qYcIBcJJe5oJ7dL3DzWP/cMmoXgd/cV2xcJ8kycmoSWO3dM8k/i092WRmzW6lcI1NcSxFdMfhdICoVW4nQWRNcK3fDfCkLWR/dUSoCcmo5W5H+t0CMW5O+sHbgzmoiWRdcGq','FCoxCKyDWOKpWPddT1i','W6pcK10Mua','WPldGf8','C8oPWRZcVCkT','WP/dNIBdQXS','jM7cPmoZoSk1W7T0WRP1kcipWR3dQSo2bG','WPhdVca','W5brEmkqWOu','WRxcNmoYwr0','xmoOW48HW7ddVCkcW4a','nmoyu3RdOW','WQddLMNdQdLiW48','WRWcgCkHW5y','f1JcGH4bcIO','yhNdMYKF','nXdcPmkqW5W','pXJcTrxcHc3cUs09WPldUmkhlCoNW5VdISoxWORcLCkk','dmk+W6WRW6RdJG','W7pcRSoqWRLx','W5b0WQatW6m','WQBdKgNdPs5vW5OktSk/','a8k+W6q','5Bsm5y+M5lMT6lYa5RsN5yMr776r5OMt6ikA5BAW6Aks5y+M6l+n','W7/cLMaGqfy','nvKomuNdPNGrW4RcQq','bSkIW40VW6FdJG','cmomsKldI8ksWQKZECkc','u8ofW6NcSG/cHSomWRxdJc0','ldxcN8ky','Dmk4BmkFzJyXWQBdUs4','WR3dMHa','cmk0W7CKW6ldN8kV','W7pdHGK','Es/dQ8kPBmomrW','W6ldKYhdJe7dRSo7sMBdSW','rSo0W7FcQba','cHaoWPyV','gCklW5i','xCo6ca','rM/cUmkria','tCoDC0K6WOmXWR3cOW','W4ZcHCo5WPb3','44oa5O6O56AG44obWORdNv/dNmoqW5lLTQZLPjFML6u','ihBcGdyJ','WO7dGZxdO8kXFujIWQBdVa','x8kBW5BcU8omvmo/WQu/bdhcIaq'].concat((function(){return['WQZdUhBdOZe','WRFdJWBdJYG','WRNdKaddIZVdJa','rhPW','WQH5bwRdLa','W5Xzs8ksWOi','DLlcSJhcNZ3cNY07WRJdSCkA','W4FcNSoHWRjb','W7ddOcFdJeldOSolvLZdTa','WR3dIXpdVJRcHmo4WPOywSoFeCowkSofW6y0b3iEW5mmzmoNW7ThW7iQrLpcVmoTW63dLxuZW5X0hHxdSmkUBWxdKuDycmkvWQVdJSkph8kVWRVdGc7dNM7dJmo7vmooj8kZWQtcHG','WOK/W5ZcLSk7','WQTsiCkSW7C','WRNcVSowBrC','W6FcNSovWPHR','WQ1Zd8kMW6Ojheb0W6yhtYNdGfSPWPFcTI7dLSkbCNHaxSorhSkSwxJdLCk+b2NcICoTW59wtSoBW7NcNWmmW7hcQ8kyw8k3WRBdJq3cPhKOpNG2W5LkW4GVW7fmW4DrWOW','zmoCW6JcRde','vSkmFmkfwa','fcxdSG','W7pdJatdQYFdM8kHW5qdfSodxCovw8okW6y+qx0IW5mCySoNWRjeW7SLsfdcU8o7W77dK399W410gK3dNSk6AqpdGw5jgCkDWRBdN8kdgCkNWR/dMMFdL1FdKCoLvSoxiCo8WQhdI8olWPBdOSkvm8kvW57cLSkccSk7WQDIwCkRW5q','vCkJW40','cZSS','WQydBCkLW5VdOJZdGgW','kmo4fbdcNa','obhcPSkBW6a','5lMs5lI46lwf5yYW','da0WWQyv','WPpdTY3dJWq','WRFdLgtdPHK','W67dGZi','DgNdQmovvq','WP8WW57cLSkg','xuRcM3XrtCoGW5ZdUIO','W7RcRMeFzG','mIBcM8khW4m','6iYD5B2+776m56Qf5Rcr','E8klW4VcQmol','gCoZmrpcKCowvSoRDYquhbFcLG7dUJlcSf5i','jSo/WOxdK8kp','W5ZdPaFcRM8','tmo+BMmA','w8kTW4NcK8oBoKa','BZVcQ8o2Emo2W6T4WRn3zJ0yW7BcR8oGifJdGgyw','nbe+WQu6','W6lcJCoXWPXJ','WPFcGSoZtHFcV8kReSobWQpdRSo0W4BcU8o3WP4vbCkXW7OiWRFdVLxcGCkkW7ZcKWpdOCkCW5KHAgVcGIhcOIBcQ2vptq','BmotF0KwWOGF','W6/dT+wMPoI0Ih3dREwnTowBG8kStW','BW/cGmkdva','W6/dGcZdPeK','bCodWPvxqq','B8kTW5nXWRBcLa','adeyWOGE','m8o7lSocDa','44kJ5O+n56E244gX6k2g5ysC6i6k5y2L5lQU5lMv6lEi5y+/5lI1wSo3W4ldQ8kKk3BNMyJMJ7FKVBtNL5FdP3zXWPuAl+EyJ+s6SUs6Q+EVUUwjGEIoLowoQW','W6ZcIvGhyW','WPvro8kwvW','aclcUCk4W6e','k8o9b8ofAq','BKNcRa','5lM85lMK5P6x5yMX5zQb6kYn6zEE5PEh5O+x5lQn56IK77YQ6k2A5QoK5P+s6iEC6lUz6k2v5AAT572d57UG5OgX5yst','5A+Y77+D5y2S6ik96iY05BY877+u','zf7cTLfUASoXW74','zmkLW48','dCognZVcNSohCmoLAai','zmoMcSkgk8oYdSk4','BSkHW4TeWQBcKSkyuaulAmo7fa0WW68PWQBdP1G','fc/dU8k2xCk2','ANhcK8k+lG','kMyB','W41+BmkGWQ8','iSoOWQT/ESk2a8oFW6hcIW','gmo4WPhdRCka','smo2W5W','nYu/WPRcNq','ctaU','qNxcJG','a8oAW78SW7ZdU8oR','t2ZcNmk8ca','zCkjFCkDwt0r','WRNdOM08W50','iJxdH8kkCmoysWC','Bmknz8kf','f8oZxW','kgFcG8oSCSoW','wMVdVGKChdaoWOq2','WPJcK8oZ','ldJdPmksqa','jW8UWPdcVW','WQNdLICgW6W','E8kWW4vDWOO','mMdcV8oQEmoY','rmkRW4vSWR/cISkreejMn8k/wsGjW7qYWQ3dSbhcJSoOyuxcJCk5pIPpe8kLW5RdVmo8WPr3WPuwiYZcTmoPWRmfvKLhlmk3dxRdThLxW4OMW5zxeSkrffaUDSkjW5pdVmkzW6pdLXfwW7ldTCoLbh7cVq3cM8kUWQycWQT8aHr/W4qaBSoxWR9XW4BdICooWPBdS0NcJmkmWQjDEsa0jCk3tSoHW6dcOCoRW6GDEhaXWP/dUCkDW69+W6L4fG5dmSkNpCkytCkHpMy','Fmovf8oGWRm'];}()));}()));}());Iii11l=function(){return l1lli1;};return Iii11l();};!(async()=>{const ili111=ill1I1,i1ilII={'WVjkH':'CookieJD2','mpZni':function(iIIii1,IllIi1){return iIIii1(IllIi1);},'YszmG':ili111(0x1b3,'bS%N'),'YGFFR':function(lilIII,Ii1ilI){return lilIII+Ii1ilI;},'hWXXJ':ili111(0x136,'^V*['),'IBWIy':function(II11i1,iliIil){return II11i1!==iliIil;},'Bfqdw':ili111(0xe5,'jUkn'),'jKRQE':ili111(0xff,'vtn*'),'FHJAM':ili111(0xf6,')6Js'),'eJJHI':ili111(0x193,'*OIl'),'MZfXq':function(iliIii,lill1i,il1li){return iliIii(lill1i,il1li);},'EnbbL':'\x0a暂无活动~\x0a','piWLv':function(iIIill,iilii){return iIIill<iilii;},'MwCgn':ili111(0x1b5,'eR0q'),'FCeRJ':function(Ill11i,iilil){return Ill11i===iilil;},'ndByc':ili111(0x141,'59*]'),'TrqCi':function(Ill11l,il1ll){return Ill11l(il1ll);},'JkwGv':function(i1ilIi,lill1l){return i1ilIi+lill1l;},'PCeLz':function(l1l1i1){return l1l1i1();}};if(!I1iIII[0x0]){if(i1ilII['IBWIy'](i1ilII[ili111(0x18d,'GCsA')],ili111(0x185,'2sf['))){$[ili111(0x192,'MDBm')]($['name'],i1ilII[ili111(0x1a5,'fZ3l')],ili111(0x16f,'0Pgi'),{'open-url':i1ilII[ili111(0xe4,'8y@q')]});return;}else lI1Iii=[i1li[ili111(0x1b2,'GCsA')](ili111(0x1a6,'g1(m')),li1II[ili111(0x1c4,'kctp')](i1ilII[ili111(0x186,'p(Fu')]),...i1ilII[ili111(0x103,'BEpO')](IliI11,i1ll[ili111(0x1c2,'jUkn')](i1ilII[ili111(0x12f,'5324')])||'[]')[ili111(0x19a,'MvZ9')](i1ilIl=>i1ilIl[ili111(0x1c8,'hxxv')])][ili111(0x15d,'g1(m')](llI11I=>!!llI11I);}authorCodeList=await i1ilII[ili111(0x1c3,'&hSF')](iill1,i1ilII['eJJHI']),$['authorCode']=authorCodeList[i1ilII['MZfXq'](iii1l1,0x0,authorCodeList[ili111(0x10c,'fJKE')])],$[ili111(0x110,'fZ3l')]=$['authorCode'];if(!$[ili111(0xbe,'yDHA')]){console[ili111(0x115,'59*]')](i1ilII[ili111(0x181,'2sf[')]);return;}for(let Il1i11=0x0;i1ilII[ili111(0x1a0,'5324')](Il1i11,I1iIII[ili111(0x17f,'BOw&')]);Il1i11++){if(i1ilII[ili111(0x1c5,'TxM5')](i1ilII[ili111(0xd7,'BOw&')],i1ilII['MwCgn']))iIIl1I[ili111(0x118,'p(Fu')]=I1iIli[ili111(0x133,')6Js')][0x1];else{if(I1iIII[Il1i11]){if(i1ilII[ili111(0x180,'jUkn')](ili111(0xc0,'MDBm'),i1ilII[ili111(0xfd,'MDBm')])){liiI11=I1iIII[Il1i11],$[ili111(0x170,'PX)r')]=i1ilII[ili111(0x120,'fJKE')](decodeURIComponent,liiI11[ili111(0x168,'bS%N')](/pt_pin=([^; ]+)(?=;?)/)&&liiI11[ili111(0x126,'iUxY')](/pt_pin=([^; ]+)(?=;?)/)[0x1]),$[ili111(0x143,'shTG')]=Il1i11+0x1,$['isLogin']=!![],$[ili111(0x14b,'X9Vj')]='',message='',console['log'](i1ilII[ili111(0x198,'TxM5')](i1ilII[ili111(0x1ba,'1J75')](ili111(0x1a8,'))L7')+$['index'],'】'),$[ili111(0x19f,'8y@q')]||$[ili111(0x14a,'5324')])+'1111*\x0a');if(!$[ili111(0x116,'(!71')]){$['msg']($[ili111(0x137,'PX)r')],ili111(0xc6,'5324'),ili111(0xe2,'0Pgi')+$['index']+'\x20'+($[ili111(0x11a,'MvZ9')]||$[ili111(0x170,'PX)r')])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/bean/signIndex.action',{'open-url':i1ilII[ili111(0xfb,'fZ3l')]});$[ili111(0x164,'1J75')]()&&await i1il1[ili111(0x1b7,'^bgQ')]($[ili111(0x196,')6Js')]+ili111(0x12b,'aJLH')+$[ili111(0x142,'*lDA')],ili111(0x134,'13my')+$['index']+'\x20'+$[ili111(0x10a,'bS%N')]+ili111(0x1ac,'TxM5'));continue;}await i1ilII['PCeLz'](i1ili),await $['wait'](0x7d0);}else lIIili[ili111(0x16b,'eR0q')]=IiiIil[ili111(0xd2,'yDHA')][0x1],IiiIii['sPrizeName']=IIlll[ili111(0x109,'T2s^')][0x1],liliI[ili111(0x188,'iUxY')](i1ilII[ili111(0x1c9,'BOw&')](i1ilII[ili111(0x119,'KqNw')](i1ilII[ili111(0xd4,'5324')](i1ilII[ili111(0x10d,'g1(m')],ll1lI[ili111(0x1d1,'shTG')]),'\x20'),l1iii[ili111(0x11e,'TxM5')]));}}}if(IIii1i){if($[ili111(0x1d0,'hxxv')]())await i1il1['sendNotify'](''+$[ili111(0x127,'p(Fu')],''+IIii1i);$[ili111(0xe6,'yDHA')]($['name'],'',IIii1i);}})()['catch'](IIii11=>{const Ii1I11=ill1I1;$[Ii1I11(0xbc,'eR0q')]('','❌\x20'+$[Ii1I11(0x1a2,'atB)')]+',\x20失败!\x20原因:\x20'+IIii11+'!','');})[ill1I1(0x13a,'H@0y')](()=>{const IllIli=ill1I1;$[IllIli(0x174,'b]zQ')]();});async function i1ili(){const ii1Ii=ill1I1,iliIl1={'cFtIp':ii1Ii(0x163,'BOw&'),'RmWzR':function(IIliI1){return IIliI1();},'wHXzV':function(il1lI){return il1lI();}},Ii1il1=iliIl1[ii1Ii(0x12d,'Jjqr')]['split']('|');let iii1ll=0x0;while(!![]){switch(Ii1il1[iii1ll++]){case'0':await $[ii1Ii(0x199,'atB)')](0x1f4);continue;case'1':await Iiill1();continue;case'2':await $['wait'](0x1f4);continue;case'3':await iliIl1['RmWzR'](lilII1);continue;case'4':await iliIl1['wHXzV'](I1iII1);continue;}break;}}function Iiill1(){const ii1Il=ill1I1,IliIIl={'mVlKu':'领取ID：','QdbsD':ii1Il(0x1cd,'0Pgi'),'mwwMD':ii1Il(0x113,'aJLH'),'FHQSs':'FqVIX','rtzXY':'CgMBK','jrioq':function(I1il1l,lI1l1l){return I1il1l(lI1l1l);},'wOMPK':ii1Il(0xcd,'MDBm'),'PhJJV':ii1Il(0x18c,'vtn*'),'ZFjgk':ii1Il(0xdf,'&hSF'),'oDYWI':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_2\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/14.0.1\x20Mobile/15E148\x20Safari/604.1'};return new Promise(async IIliII=>{const l1iII=ii1Il,iiliI={'sAYnB':IliIIl[l1iII(0x1a1,'MvZ9')],'kuXQK':IliIIl[l1iII(0xda,'p(Fu')],'uvsit':function(I1il1i,IliIIi){return I1il1i!==IliIIi;},'fzjYD':IliIIl[l1iII(0xd1,'BOw&')],'kKkoi':function(lI1l1i,i1iil){return lI1l1i+i1iil;},'xLvRe':IliIIl[l1iII(0xd6,')6Js')],'aSZfN':IliIIl[l1iII(0x123,'ABNX')],'MJWZl':function(llI11l,I1llIl){const iI1Ill=l1iII;return IliIIl[iI1Ill(0x18b,'aJLH')](llI11l,I1llIl);},'rwNVE':function(i1iii,I1llIi){return i1iii||I1llIi;}},Ill11I={'url':l1iII(0xd8,'atB)')+$[l1iII(0x175,'GCsA')]+l1iII(0x19c,'BEpO')+ililI1+'&sceneval=2&g_login_type=1&callback=query_tempactivconfig&g_ty=ls&appCode=msc588d6d5','headers':{'Accept':IliIIl[l1iII(0x1b4,'PX)r')],'Accept-Encoding':IliIIl[l1iII(0x195,'b]zQ')],'Accept-Language':'zh-cn','Connection':l1iII(0x15a,'BOw&'),'Cookie':liiI11,'Host':IliIIl[l1iII(0x147,'&hSF')],'Referer':'https://wq.jd.com/activet2/looktreasure/query_tempactivconfig?uuid='+$[l1iII(0x144,'OpaX')]+'&_='+ililI1+l1iII(0x176,'GCsA'),'User-Agent':IliIIl[l1iII(0x16d,'FV8m')]}};$['get'](Ill11I,(IIii1I,llI11i,i1iIi1)=>{const lilI1=l1iII,l1l1il={'NZAxe':iiliI[lilI1(0x12e,'MvZ9')],'HSISU':iiliI[lilI1(0x101,'0Pgi')]};try{iiliI[lilI1(0x1b8,'*lDA')](lilI1(0x19e,'PX)r'),iiliI[lilI1(0x157,'eR0q')])?IIii1I?console[lilI1(0x13c,'ABNX')](IIii1I):($['backEnd']=i1iIi1['match'](/"backEnd":"(.+?)"/),$[lilI1(0x177,'kctp')]&&($['backEnd']=$['backEnd'][0x1]),console[lilI1(0x10e,'MJ1e')](iiliI[lilI1(0xca,'jUkn')](lilI1(0x162,'*lDA'),$['backEnd']))):(IIII11[lilI1(0xf2,'OpaX')]=i1illi[lilI1(0x139,'hxxv')](/"backEnd":"(.+?)"/),i1illl['backEnd']&&(iliII1['backEnd']=II11I1[lilI1(0xf7,'^bgQ')][0x1]),lilIll[lilI1(0xc2,'bS%N')](l1l1il[lilI1(0x161,'59*]')]+l1i111[lilI1(0x154,'iUxY')]));}catch(iliIi1){$[lilI1(0x156,'13my')](iliIi1,llI11i);}finally{iiliI[lilI1(0xfe,'BEpO')](iiliI[lilI1(0x17d,'X9Vj')],iiliI[lilI1(0x121,'aJLH')])?iiliI[lilI1(0x117,'g1(m')](IIliII,iiliI[lilI1(0x171,'KqNw')](i1iIi1,{})):IiII[lilI1(0x11c,'shTG')](l1l1il['HSISU']);}});});}function I1iII1(){const IIIi1=ill1I1,Il1i1I={'LdbQw':IIIi1(0x1bf,')6Js'),'gyikP':function(Ii1iii,iIIilI){return Ii1iii!==iIIilI;},'wkyLE':function(il1l1,Ii1iil){return il1l1||Ii1iil;},'BLrAI':IIIi1(0x18a,'*Fb5'),'bXjWh':IIIi1(0x1bc,'!)XL'),'qsfRG':'keep-alive','OHDFo':IIIi1(0x125,'ABNX')};return new Promise(async Ilil1i=>{const i1llll=IIIi1,iili1={'ZDdTG':Il1i1I['LdbQw'],'IxtPB':function(Iil1iI,II11il){return Il1i1I['gyikP'](Iil1iI,II11il);},'UfHFs':'UarKd','DIswD':function(iIIil1,IlllII){return iIIil1+IlllII;},'cilsR':'宝，可能获得：','wDcxC':function(I1il1I,II111){return I1il1I(II111);},'QudfH':function(lI1l1I,lill11){const i1llli=iii1II;return Il1i1I[i1llli(0x14c,'PX)r')](lI1l1I,lill11);}},II11ii={'url':'https://wq.jd.com/activet2/looktreasure/query_activetemporary?sceneval=2&backendId='+$['backEnd']+'&_='+ililI1+'&sceneval=2&g_login_type=1&callback=query_activetemporary&g_ty=ls&appCode=msc588d6d5','headers':{'Accept':Il1i1I[i1llll(0xf1,'^bgQ')],'Accept-Encoding':Il1i1I[i1llll(0xe3,'MDBm')],'Accept-Language':i1llll(0x12c,'*OIl'),'Connection':Il1i1I['qsfRG'],'Cookie':liiI11,'Host':i1llll(0x191,'*OIl'),'Referer':i1llll(0xd8,'atB)')+$[i1llll(0x197,'vtn*')]+'&_='+ililI1+i1llll(0x1b6,'fJKE'),'User-Agent':Il1i1I[i1llll(0xe8,'5324')]}};$[i1llll(0x11f,')6Js')](II11ii,(liI1i1,I11i11,I1llII)=>{const iI1Ili=i1llll;if(iili1[iI1Ili(0x150,'jUkn')]===iili1[iI1Ili(0xf4,'MDBm')])try{liI1i1?console[iI1Ili(0x1cc,'hxxv')](liI1i1):($[iI1Ili(0x1cf,'MJ1e')]=I1llII[iI1Ili(0x139,'hxxv')](/"sPrizeDesc":"(.+?)"/),$[iI1Ili(0x179,'2sf[')]=I1llII[iI1Ili(0x153,'59*]')](/"sPrizeName":"(.+?)"/),$[iI1Ili(0xb9,'p(Fu')]&&$[iI1Ili(0xc8,'GCsA')]&&(iili1['IxtPB'](iI1Ili(0x165,'shTG'),iili1[iI1Ili(0xf9,'))L7')])?II1lll[iI1Ili(0x10b,'ABNX')]=![]:($[iI1Ili(0xe9,'59*]')]=$[iI1Ili(0x1af,'bS%N')][0x1],$[iI1Ili(0x160,'MJ1e')]=$[iI1Ili(0x1d2,'^V*[')][0x1],console['log'](iili1[iI1Ili(0xc3,'g1(m')](iili1[iI1Ili(0xd9,'^V*[')](iili1[iI1Ili(0x1ca,'vtn*')]+$['sPrizeName'],'\x20'),$[iI1Ili(0x16b,'eR0q')])))));}catch(I11i1i){$[iI1Ili(0x130,'!)XL')](I11i1i,I11i11);}finally{iili1['wDcxC'](Ilil1i,iili1[iI1Ili(0x13d,'TxM5')](I1llII,{}));}else lIIill[iI1Ili(0x128,'MDBm')](I11iIi,I1ilII);});});}function lilII1(){const llIIiI=ill1I1,I1llI1={'jPIMQ':llIIiI(0xe7,'13my'),'hqnkU':function(I11i1l,il1il){return I11i1l===il1il;},'GQdjE':llIIiI(0x19b,'TxM5'),'FzoCA':function(Il1i1i,iIIili){return Il1i1i==iIIili;},'zETfF':function(Ii1iiI,Ilil1I){return Ii1iiI!=Ilil1I;},'bhETf':function(iliIiI,II11iI){return iliIiI+II11iI;},'bFvOP':llIIiI(0x106,'hxxv'),'nUZzn':llIIiI(0x16c,'H@0y'),'rIgbA':llIIiI(0xec,'BOw&'),'iATLv':function(Il1i1l,Iil1ii){return Il1i1l==Iil1ii;},'fBBnb':'已参与过活动，或者已领取过','lpyAq':function(lill1I,Ii1ii1){return lill1I||Ii1ii1;},'VnQBx':'*/*','YSZSe':'gzip,\x20deflate,\x20br','HVdYw':llIIiI(0x145,'))L7'),'hECtD':'wq.jd.com','bmBKq':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_2\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/14.0.1\x20Mobile/15E148\x20Safari/604.1'};return new Promise(async Ilil11=>{const iI1111=llIIiI,i1ii1={'url':'https://wq.jd.com/activet2/looktreasure/draw_activetemporary?sceneval=2&backendId='+$['backEnd']+'&_='+ililI1+iI1111(0xdc,'8y@q'),'headers':{'Accept':I1llI1[iI1111(0xe0,'T2s^')],'Accept-Encoding':I1llI1['YSZSe'],'Accept-Language':I1llI1[iI1111(0xef,'Y%5h')],'Connection':'keep-alive','Cookie':liiI11,'Host':I1llI1[iI1111(0x183,'vtn*')],'Referer':iI1111(0xd3,'8y@q')+$[iI1111(0x1cb,'jUkn')]+iI1111(0x112,'Y%5h')+ililI1+'&sceneval=2&g_login_type=1&callback=query_tempactivconfig&g_ty=ls&appCode=msc588d6d5','User-Agent':I1llI1['bmBKq']}};$[iI1111(0x114,'MDBm')](i1ii1,(il1ii,llI111,i1iIiI)=>{const IIIl1=iI1111;try{if(I1llI1['jPIMQ']==='UhooH'){if(il1ii){if(I1llI1['hqnkU'](I1llI1['GQdjE'],I1llI1[IIIl1(0x1ad,'TxM5')]))console['log'](il1ii);else return iI11II['log'](iIII1I),ilil1i[IIIl1(0x10e,'MJ1e')]('京东服务器访问数据为空，请检查自身设备网络情况'),![];}else{let I1il11=i1iIiI?.['replace'](/[\n\r]/g,'')?.[IIIl1(0x15e,'(!71')](/draw_activetemporary\((\{.*?\})\);/);if(I1il11){let lI1l11=JSON[IIIl1(0x13e,'(!71')](I1il11[0x1]);if(I1llI1[IIIl1(0x152,'MJ1e')](lI1l11?.[IIIl1(0x1b9,'KqNw')],0x0))I1llI1[IIIl1(0xe1,'H@0y')](lI1l11?.[IIIl1(0xeb,'H@0y')],'')?console[IIIl1(0x135,'jUkn')](I1llI1['bhETf'](I1llI1[IIIl1(0x190,'BOw&')],lI1l11?.['prize'])):I1llI1[IIIl1(0xd5,'atB)')]===I1llI1['nUZzn']?console[IIIl1(0xdb,'fJKE')](I1llI1[IIIl1(0x148,'5324')]):illIlI[IIIl1(0x194,'Y%5h')](liIiI?.[IIIl1(0xe6,'yDHA')]);else I1llI1[IIIl1(0x1b1,'iUxY')](lI1l11?.['ret'],0x3ed)?console[IIIl1(0xdd,'OpaX')](I1llI1['fBBnb']):console[IIIl1(0xba,'2sf[')](lI1l11?.[IIIl1(0x178,'b]zQ')]);}else console[IIIl1(0x104,'g1(m')](IIIl1(0x182,'MvZ9'));}}else return iil1ii['log'](IlIlli),il1i1i['msg'](lil111['name'],'','请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie'),[];}catch(iI1Iii){$['logErr'](iI1Iii,llI111);}finally{Ilil11(I1llI1[IIIl1(0xfa,'yDHA')](i1iIiI,{}));}});});}function iill1(liI1ii){const ii1ii=ill1I1,lIIiIl={'SipYQ':function(iI1Iil,il1iI){return iI1Iil||il1iI;},'mNfCO':'TUdeM','YKcLk':function(i1iIii,i1iIil){return i1iIii===i1iIil;},'ZxIjv':ii1ii(0x15c,'kctp'),'zlvHG':ii1ii(0x131,'0Pgi'),'dKaVQ':function(liI1il,llIlIi){return liI1il!==llIlIi;},'bpaAa':ii1ii(0x17a,'8y@q'),'aFUAH':function(llIlIl,II11I){return llIlIl(II11I);},'kcoUm':ii1ii(0x1a7,'^bgQ'),'msmVx':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_2_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.3\x20Mobile/15E148\x20Safari/604.1\x20Edg/87.0.4280.88'};return new Promise(il1i1=>{const I1I1lI=ii1ii,lIIiIi={'lKOPB':function(liI1iI,iI1Il1){const Iii1=iii1II;return lIIiIl[Iii1(0x1a3,'*Fb5')](liI1iI,iI1Il1);},'HDZdG':function(i1iIl1,i1lli1){return i1iIl1===i1lli1;},'JTnTa':lIIiIl[I1I1lI(0x1be,'X9Vj')],'oksLt':function(llIlII,IIlII){return lIIiIl['YKcLk'](llIlII,IIlII);},'xcPvt':lIIiIl[I1I1lI(0x16e,'iUxY')],'MeUSB':lIIiIl[I1I1lI(0x100,'*lDA')],'PKvLC':function(lIIiII,i1iIlI){const ii1il=I1I1lI;return lIIiIl[ii1il(0x167,'aJLH')](lIIiII,i1iIlI);},'ODkQR':lIIiIl[I1I1lI(0xcb,'8y@q')],'tKFGN':function(li111,liI1lI){const l1iIlI=I1I1lI;return lIIiIl[l1iIlI(0xcf,'X9Vj')](li111,liI1lI);}};if(lIIiIl[I1I1lI(0x14d,'atB)')]!==lIIiIl[I1I1lI(0xce,'Jjqr')])iii1Il[I1I1lI(0x13c,'ABNX')]('','❌\x20'+lI1IiI[I1I1lI(0x158,'8y@q')]+I1I1lI(0xf8,'*Fb5')+i1lI+'!','');else{const ll1I1={'url':liI1ii+'?'+new Date(),'timeout':0x2710,'headers':{'User-Agent':lIIiIl[I1I1lI(0x14e,'MvZ9')]}};$['get'](ll1I1,async(Ii1ili,iI1Ii1,Ii1ill)=>{const IIIlI1=I1I1lI,llIlI1={'BGaPU':function(iI1IiI,IIlI1){const iI111I=iii1II;return lIIiIi[iI111I(0xea,'*lDA')](iI1IiI,IIlI1);}};try{if(Ii1ili)lIIiIi[IIIlI1(0x1b0,'*lDA')](IIIlI1(0x1c6,'H@0y'),lIIiIi[IIIlI1(0x17e,'p(Fu')])?l1llII[IIIlI1(0xcc,'8y@q')](IilIll,lI11Ii):$[IIIlI1(0xee,'T2s^')]=![];else{if(lIIiIi[IIIlI1(0x17b,'H@0y')](lIIiIi[IIIlI1(0x122,'2sf[')],IIIlI1(0x1bb,'8y@q'))){if(Ii1ill)Ii1ill=JSON[IIIlI1(0x10f,'X9Vj')](Ii1ill);$[IIIlI1(0x1c7,'PX)r')]=!![];}else lilIil[IIIlI1(0x14f,'fJKE')]();}}catch(i1lliI){lIIiIi['HDZdG'](lIIiIi['MeUSB'],lIIiIi[IIIlI1(0x1a4,'bS%N')])?($['logErr'](i1lliI,iI1Ii1),Ii1ill=null):llIllI(llIlI1[IIIlI1(0xed,'OpaX')](I1ilI1,{}));}finally{if(lIIiIi[IIIlI1(0xc7,'kctp')](lIIiIi[IIIlI1(0x169,'Jjqr')],lIIiIi[IIIlI1(0x1c1,'shTG')]))return!![];else lIIiIi['tKFGN'](il1i1,Ii1ill);}});}});}function iii1l1(IiillI,ili11I){const i1lIiI=ill1I1,li11l={'Nziih':function(lliiIl,li11i){return lliiIl+li11i;},'ZqsvF':function(lliiIi,iiIi1I){return lliiIi*iiIi1I;},'PbFYR':function(IllIl1,ll1Ii){return IllIl1-ll1Ii;}};return li11l[i1lIiI(0x1aa,'g1(m')](Math[i1lIiI(0xc5,'BOw&')](li11l['ZqsvF'](Math[i1lIiI(0x1ab,'))L7')](),li11l[i1lIiI(0x12a,'fJKE')](ili11I,IiillI))),IiillI);}function IIliIl(ll1Il){const IiiIl=ill1I1,iiIi11={'vdCfR':IiiIl(0x15b,'FV8m'),'uZXxk':function(ill1II,i1llil){return ill1II==i1llil;},'Hdgcf':'object','CMiuB':function(i1llii,l1i1I1){return i1llii===l1i1I1;},'BvKEG':IiiIl(0x187,'0Pgi')};try{if(iiIi11['uZXxk'](typeof JSON[IiiIl(0x151,'vtn*')](ll1Il),iiIi11[IiiIl(0xf5,'BOw&')])){if(iiIi11[IiiIl(0xf0,'eR0q')](iiIi11[IiiIl(0x102,'H@0y')],IiiIl(0x111,'Y%5h')))return!![];else{i1l1I[IiiIl(0xc1,'*OIl')](iiIi11[IiiIl(0x166,'shTG')]);return;}}}catch(llIIii){return console[IiiIl(0x1bd,'GCsA')](llIIii),console['log'](IiiIl(0x105,'5324')),![];}}function II11ll(Ii1I1i){const ii1l1l=ill1I1,llIIlI={'suaxi':ii1l1l(0x124,'!)XL'),'IDmGy':'请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie'};if(typeof Ii1I1i==llIIlI['suaxi'])try{return JSON['parse'](Ii1I1i);}catch(Ii1I1l){return console[ii1l1l(0xdb,'fJKE')](Ii1I1l),$[ii1l1l(0x19d,'*lDA')]($[ii1l1l(0x1d3,'H@0y')],'',llIIlI[ii1l1l(0x1a9,'atB)')]),[];}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }